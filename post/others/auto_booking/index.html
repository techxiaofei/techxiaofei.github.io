<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>使用go语言开发自动化脚本 - 一键定场、抢购、预约、捡漏 - 码农在新加坡的个人博客</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="码农在新加坡" /><meta name="description" content="原文地址：码农在新加坡的个人博客 背景 不知道大家有没有这种经历，想要抢课，定场，发现抢不到，想要捡漏，又要随时刷，今天我就来讲一下我是怎么使用" /><meta name="keywords" content="go" />


<meta name="baidu-site-verification" content="code-vlQZuedAQs" />
<meta name="google-site-verification" content="wSRHVihIZDd-cqk3DLM6gAefwX46kynOT6WKGyOGQnM" />
<meta name="sogou_site_verification" content="dtuHIGY7cK" />
<meta name="msvalidate.01" content="9CB8E7A6AD8ADF22F9ED93166445E5B9" />


<script data-ad-client="ca-pub-6791708134711137" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6791708134711137"
     crossorigin="anonymous"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-QZ3LW65VYR"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-QZ3LW65VYR');
</script>


<meta name="generator" content="Hugo 0.109.0 with theme even" />


<link rel="canonical" href="https://leftpocket.cn/post/others/auto_booking/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link href="/lib/fancybox/jquery.fancybox-3.1.20.min.css" rel="stylesheet">


<meta property="og:title" content="使用go语言开发自动化脚本 - 一键定场、抢购、预约、捡漏" />
<meta property="og:description" content="原文地址：码农在新加坡的个人博客 背景 不知道大家有没有这种经历，想要抢课，定场，发现抢不到，想要捡漏，又要随时刷，今天我就来讲一下我是怎么使用" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://leftpocket.cn/post/others/auto_booking/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2022-12-14T13:00:51+08:00" />
<meta property="article:modified_time" content="2022-12-14T13:00:51+08:00" />
<meta itemprop="name" content="使用go语言开发自动化脚本 - 一键定场、抢购、预约、捡漏">
<meta itemprop="description" content="原文地址：码农在新加坡的个人博客 背景 不知道大家有没有这种经历，想要抢课，定场，发现抢不到，想要捡漏，又要随时刷，今天我就来讲一下我是怎么使用"><meta itemprop="datePublished" content="2022-12-14T13:00:51+08:00" />
<meta itemprop="dateModified" content="2022-12-14T13:00:51+08:00" />
<meta itemprop="wordCount" content="3045">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="使用go语言开发自动化脚本 - 一键定场、抢购、预约、捡漏"/>
<meta name="twitter:description" content="原文地址：码农在新加坡的个人博客 背景 不知道大家有没有这种经历，想要抢课，定场，发现抢不到，想要捡漏，又要随时刷，今天我就来讲一下我是怎么使用"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">码农在新加坡的个人博客</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">首页</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">归档</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">分类</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">关于</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">码农在新加坡的个人博客</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">首页</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">归档</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">分类</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">关于</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">使用go语言开发自动化脚本 - 一键定场、抢购、预约、捡漏</h1>

      <div class="post-meta">
        <span class="post-time"> 2022-12-14 </span>
        <div class="post-category">
            <a href="/categories/others/"> Others </a>
            </div>
          <span class="more-meta"> 约 3045 字 </span>
          <span class="more-meta"> 预计阅读 7 分钟 </span>
        <span id="busuanzi_container_page_pv" class="more-meta"> <span id="busuanzi_value_page_pv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> 次阅读 </span>
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">文章目录</h2>
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#背景">背景</a></li>
    <li><a href="#基础知识">基础知识</a>
      <ul>
        <li>
          <ul>
            <li><a href="#浏览器发送http请求">浏览器发送HTTP请求</a></li>
            <li><a href="#自动化流程">自动化流程</a></li>
            <li><a href="#自动发送email">自动发送Email</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#实现">实现</a>
      <ul>
        <li>
          <ul>
            <li><a href="#模拟">模拟</a></li>
            <li><a href="#代码">代码</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#结语">结语</a></li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>原文地址：<a href="https://leftpocket.cn/post/others/auto_booking/">码农在新加坡的个人博客</a></p>
<h1 id="背景">背景</h1>
<!-- 亲爱的小伙伴大家好 -->
<p>不知道大家有没有这种经历，想要抢课，定场，发现抢不到，想要捡漏，又要随时刷，今天我就来讲一下我是怎么使用Go语言开发自动化脚本来解决定场，抢购，预约的难题。</p>
<!--
本篇视频需要小伙伴们有一定的编码能力和基本的网络知识（http请求）即可，非常简单。
 -->
<h1 id="基础知识">基础知识</h1>
<h3 id="浏览器发送http请求">浏览器发送HTTP请求</h3>
<p>我们在浏览器中打开一个网站执行一系列操作，其实就是用户通过浏览器与网站服务器的HTTP交互的过程。</p>
<p>下图是一个最简单的流程：</p>
<p><img src="/img/app/http_flow.png" alt="http flow"></p>
<ol>
<li>用户在浏览器输入账号密码登录（也可能是扫描二维码或者第三方账号登录），然后浏览器会发送一个HTTP请求到网站服务器，网站服务器验证成功之后根据你的账号信息生成一个<code>Token</code>或者<code>Session</code>，然后把<code>Token</code>或者<code>SessionID</code>返回给浏览器并告诉浏览器登录成功，浏览器跳转登录后的页面。 <!-- Token和Session的区别 --></li>
<li>用户点击查询，比如查询是否有合适的Slot，浏览器发送查询HTTP请求给网站服务器，带上<code>Token</code>，<code>Token</code>是用来验证这个用户是谁，服务器验证成功之后返回可以预定的列表。比如一个可预订的时间列表。</li>
<li>用户选择列表里面一个可用的<code>Slot</code>，开始预订，浏览器发送预订HTTP请求给网站服务器，带上<code>Token</code>和<code>SlotId</code>，<code>SlotId</code>用来验证你要定的那个Slot是什么，比如是哪天什么时间段等等。如果服务器收到请求的时候这个<code>Slot</code>还是可用的，那么就记录下单并返回预订成功。</li>
<li>然后你就可以点击付款按钮，可以通过余额，银行卡或支付宝等第三方付款方式付款，付款成功会返回给浏览器告诉用户下单成功。</li>
</ol>
<h3 id="自动化流程">自动化流程</h3>
<p>理解了这个最简单的流程，那我们就可以开始想怎么样自动化流程。</p>
<p>最简单的情况就是：我们把查询和预订的过程自动化。当然登录的过程也是可以的，只不过很多第三方/二维码登录的，有时候还需要验证码，比较复杂，为了简单我就自己通过浏览器登录拿到Token之后自动查询和预订。</p>
<p><img src="/img/app/http_flow_auto.png" alt="http flow"></p>
<ol>
<li>登录成功后拿到Token。</li>
<li>脚本使用这个Token运行脚本工具，循环执行查询和预订的HTTP命令，如果预订成功，邮件通知给用户。</li>
<li>收到邮件之后打开浏览器付款。</li>
</ol>
<p>Token一般来说每次登录后有效期为1小时到1天左右（取决于网站服务器的设定），所以我们需要每段时间获取一次Token重新执行脚本。</p>
<h3 id="自动发送email">自动发送Email</h3>
<p>SMTP是发送邮件的协议，我们可以通过简单的代码来实现发送邮件的功能，在这里主要是通过<code>gomail.v2</code>的 Go语言库 来支持订购成功之后发送邮件通知。</p>
<p>每个邮件运营商 (qq, 163, gmail, outlook, &hellip;)都有自己的SMTP的域名和端口，
比如你使用qq邮箱发邮件，去QQ邮箱的 <a href="https://service.mail.qq.com/cgi-bin/help?id=28&amp;no=167&amp;subtype=1">帮助中心</a> 可以查到他们的SMTP服务器端口是465或者587，就用他们提供的<code>smtp.qq.com:587</code>，即可发送成功。</p>
<p>其他的SMTP协议的运营商可以查看我的另一个博客：</p>
<p><a href="https://www.leftpocket.cn/post/others/smtp/">各大邮箱smtp服务器及端口</a></p>
<!-- 基本所有主流的语言都是支持SMTP的，所以你使用其他语言也都可以发送。-->
<h1 id="实现">实现</h1>
<p>有了这些基础知识之后，我们就可以开始用代码实现脚本工具的自动化流程了。</p>
<h3 id="模拟">模拟</h3>
<p>需要实现自动化脚本，第一步就是需要模拟HTTP请求，相当于把用户在浏览器的一系列操作用代码来实现。</p>
<p>要代码实现我们就需要先知道发送的HTTP请求的URL,Header,Payload分别是什么。</p>
<h4 id="开发者模式">开发者模式</h4>
<p>在<strong>Chrome</strong>浏览器使用<code>F12</code>进入开发者模式，选择<strong>Network</strong>-&gt;找到HTTP请求的Name-&gt;可以看到右边有<strong>Header、Preview、Response</strong>等信息，这就是用户行为（点击事件）产生的网络交互，也就是浏览器向服务器请求数据并返回给浏览器的过程。</p>
<p>而我们要模拟的就是这个HTTP网络交互的行为。</p>
<p><img src="/img/app/copy_as_curl.png" alt="http flow"></p>
<p>找到你要模拟的HTTP请求的Name，右键-&gt;<code>Copy</code>-&gt;<code>Copy As cURL</code>。</p>
<h4 id="curl">cURL</h4>
<p><code>cURL</code>是一个Linux命令，开发人员使用它来与服务器进行数据交互，<strong>cURL</strong> 里面包括 url, body, header, 加密方式 等等，正确设置命令后执行即可得到服务器的正确响应。</p>
<p>拿到cURL我们可以写go语言代码来模拟HTTP请求，要自己填充Header，Body等信息。容易写错。庆幸的是，已经有人做了自动化的工具帮我们一键把cURL转成Go语言的代码，也就是说我们不用自己写具体的HTTP请求代码了。</p>
<p>网站地址：<a href="https://mholt.github.io/curl-to-go/">curl-to-go</a></p>
<p>我们把cURL复制到网站里面就可以实时得到具体的Go代码。</p>
<p><img src="/img/app/curl_to_go.png" alt="http flow"></p>
<p>当然这个工具只帮我们创建了Body的结构体，具体的值还是需要我们去填充，我们从curl里面找到
<code>--data-raw</code>来自己填进去即可。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Generated by curl-to-Go: https://mholt.github.io/curl-to-go
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// curl &#39;https://www.zhihu.com/api/v4/answers/2807591609/voters&#39; \
</span></span></span><span class="line"><span class="cl"><span class="c1">//   -H &#39;authority: www.zhihu.com&#39; \
</span></span></span><span class="line"><span class="cl"><span class="c1">//   -H &#39;accept: */*&#39; \
</span></span></span><span class="line"><span class="cl"><span class="c1">//   -H &#39;accept-language: zh-CN,zh;q=0.9,en;q=0.8&#39; \
</span></span></span><span class="line"><span class="cl"><span class="c1">//   -H &#39;content-type: application/json&#39; \
</span></span></span><span class="line"><span class="cl"><span class="c1">//   --data-raw &#39;{&#34;type&#34;:&#34;up&#34;}&#39; \
</span></span></span><span class="line"><span class="cl"><span class="c1">//   --compressed
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Payload</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Type</span> <span class="kt">string</span> <span class="s">`json:&#34;type&#34;`</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">data</span> <span class="o">:=</span> <span class="nx">Payload</span><span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="c1">// fill struct
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">Type</span><span class="p">:</span> <span class="s">&#34;up&#34;</span><span class="p">,</span>  <span class="c1">// fill struct yourself based on the data-raw
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nx">payloadBytes</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">json</span><span class="p">.</span><span class="nf">Marshal</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// handle err
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nx">body</span> <span class="o">:=</span> <span class="nx">bytes</span><span class="p">.</span><span class="nf">NewReader</span><span class="p">(</span><span class="nx">payloadBytes</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">req</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">http</span><span class="p">.</span><span class="nf">NewRequest</span><span class="p">(</span><span class="s">&#34;POST&#34;</span><span class="p">,</span> <span class="s">&#34;https://www.zhihu.com/api/v4/answers/2807591609/voters&#34;</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// handle err
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nx">req</span><span class="p">.</span><span class="nx">Header</span><span class="p">.</span><span class="nf">Set</span><span class="p">(</span><span class="s">&#34;Authority&#34;</span><span class="p">,</span> <span class="s">&#34;www.zhihu.com&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">req</span><span class="p">.</span><span class="nx">Header</span><span class="p">.</span><span class="nf">Set</span><span class="p">(</span><span class="s">&#34;Accept&#34;</span><span class="p">,</span> <span class="s">&#34;*/*&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">req</span><span class="p">.</span><span class="nx">Header</span><span class="p">.</span><span class="nf">Set</span><span class="p">(</span><span class="s">&#34;Accept-Language&#34;</span><span class="p">,</span> <span class="s">&#34;zh-CN,zh;q=0.9,en;q=0.8&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">req</span><span class="p">.</span><span class="nx">Header</span><span class="p">.</span><span class="nf">Set</span><span class="p">(</span><span class="s">&#34;Content-Type&#34;</span><span class="p">,</span> <span class="s">&#34;application/json&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">// Other Headers
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="nx">resp</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">DefaultClient</span><span class="p">.</span><span class="nf">Do</span><span class="p">(</span><span class="nx">req</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// handle err
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">defer</span> <span class="nx">resp</span><span class="p">.</span><span class="nx">Body</span><span class="p">.</span><span class="nf">Close</span><span class="p">()</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="代码">代码</h3>
<p>整个流程清楚了，那么下一步就是打开你的编辑器，来实现代码了。我这里实现了一个网站的预订的代码，来给大家讲解一下，登录我并没有实现，而是使用<code>curl to go</code> 生成了Go语言代码并根据go struct改造具体条件。在Cookie没过期的情况下可以循环调用。</p>
<p>自动预订代码：<a href="https://github.com/xiaoma-coding/autobooking">github.com</a></p>
<p><img src="/img/app/auto_code.png" alt="auto_flow"></p>
<ol>
<li><code>query.go</code>，查询的HTTP请求，把刚才<code>curl-to-go</code>生成的Go代码Copy进来，填上Payload就可以请求成功了。</li>
<li><code>book.go</code>，把你刚才query的结果传进来，根据你的需求过滤满足条件的<code>Slot</code>，直接预订即可。</li>
<li><code>email.go</code>，发送邮件的接口，我使用了<code>gomail.v2</code>的库，非常好用。</li>
<li><code>config.go</code>，配置文件，通过json输入</li>
<li><code>parse.go</code>，解析respone的，</li>
<li><code>main.go</code>，主函数，读取json配置，定时执行查询和预订的接口，根据response的结果看是否成功，成功后发送邮件给你。</li>
<li><code>README.md</code>，告诉你怎么执行这个工具的。</li>
</ol>
<p>这是相对比较简单的流程。</p>
<p>所以我们要做的就是手动在浏览器登录（也可以代码模拟登录），然后把返回的token放到query的HTTP请求里面。更简单的做法是，直接把query的cURL拿来<code>curl-to-go</code>转成go语言，Cookie已经在Header里面了。</p>
<p>然后我们再写<code>booking</code>的的流程，正常来说在一段时间内的<code>Header</code>都是一样的，我们直接把query的<code>Header</code>存起来赋值给<code>booking</code>的HTTP请求即可。</p>
<p>然后再写定时，你可以开启一个定时器，可以每<strong>x</strong>秒执行一次，然后执行<strong>n</strong>次停下来，或者永久执行。只是这个token一段时间后会过期，需要重新从浏览器登录并拿到Token信息复制到代码里面执行。</p>
<p>下一步就是发邮件，我们使用SMTP请求发送邮件，需要配置两个邮件，A发给B，然后需要填写A邮箱的<code>SMTP+Port+email+password</code>。</p>
<p>我这边使用了gomail.v2的go语言库。</p>
<p>官网链接：<a href="https://pkg.go.dev/gopkg.in/gomail.v2">gomail.v2</a> 以供参考。</p>
<p>这样我们就写完代码了，
执行 <code>go run main.go</code> 就可以执行了。</p>
<p>然后你就可以玩玩手机等着预订成功之后给你发邮件了，你也可以只是查询，查询到之后给你发邮件你自己登录进去再预订。</p>
<h1 id="结语">结语</h1>
<p>代码放在了 <a href="https://github.com/xiaoma-coding/autobooking">Github</a> 上，有兴趣的小伙伴可以参考，只不过每个网站的HTTP调用的Header和payload的格式都不一样，还需要你自己修改一些代码。所以还需要有一定代码能力的人才可以改造成功。</p>
<!-- 微信公众号改为 原文，点击查看原文即可获取 -->
<p>但是整体的框架我已经搭好了，希望可以减少你大量的工作量。</p>
<p>请阅读你需要访问的网站的规定，是否禁止第三方脚本，避免自己的账号有被封禁的风险。请遵守法律法规。</p>
<p>&lt;全文完&gt;</p>
<p>欢迎关注我的微信公众号：<strong>码农在新加坡</strong>，有更多好的技术分享。
<img src="/img/personal/qrcode_2.png" alt="pic"></p>

    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">文章作者</span>
    <span class="item-content">码农在新加坡</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">上次更新</span>
    <span class="item-content">
        2022-12-14
        
    </span>
  </p>
  
  
</div>
<div class="post-reward">
  <input type="checkbox" name="reward" id="reward" hidden />
  <label class="reward-button" for="reward">赞赏支持</label>
  <div class="qr-code">
    
    <label class="qr-code-image" for="reward">
        <img class="image" src="/img/personal/wechat_pay.png">
        <span>微信打赏</span>
      </label>
    <label class="qr-code-image" for="reward">
        <img class="image" src="/img/personal/alipay.png">
        <span>支付宝打赏</span>
      </label>
  </div>
</div><footer class="post-footer">
      
      <nav class="post-nav">
        <a class="prev" href="/post/system_design/password/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">后端面试之系统设计 - 用户密码如何储存在DB里</span>
            <span class="prev-text nav-mobile">上一篇</span>
          </a>
        <a class="next" href="/post/hugo/hugo_adsense/">
            <span class="next-text nav-default">从零开始搭建个人博客网站系列 六、接入google adsense广告</span>
            <span class="next-text nav-mobile">下一篇</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  
    <script src="https://utteranc.es/client.js"
            repo="xiaoma-coding/xiaoma-coding.github.io"
            issue-term="pathname"
            theme="github-light"
            crossorigin="anonymous"
            async>
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://github.com/utterance">comments powered by utterances.</a></noscript>

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:majianfei1023@gmail.com" class="iconfont icon-email" title="email"></a>
      <a href="https://github.com/left-pocket" class="iconfont icon-github" title="github"></a>
      <a href="https://www.zhihu.com/people/left-pocket" class="iconfont icon-zhihu" title="zhihu"></a>
  <a href="https://leftpocket.cn/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    由 <a class="hexo-link" href="https://gohugo.io">Hugo</a> 强力驱动
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    主题 - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  <div class="busuanzi-footer">
    <span id="busuanzi_container_site_pv"> 本站总访问量 <span id="busuanzi_value_site_pv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> 次 </span>
      <span class="division">|</span>
    <span id="busuanzi_container_site_uv"> 本站总访客数 <span id="busuanzi_value_site_uv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> 人 </span>
  </div>

  <span class="copyright-year">
    &copy; 
    2020 - 
    2023<span class="heart"><i class="iconfont icon-heart"></i></span><span>码农在新加坡</span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  <script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>
  <script type="text/javascript" src="/lib/fancybox/jquery.fancybox-3.1.20.min.js"></script>



<script type="text/javascript" src="/js/main.min.4ae89da218555efa0e7093a20b92017d2e1202b66fff9fc2edf4cb8d44b44c6e.js"></script>








</body>
</html>
